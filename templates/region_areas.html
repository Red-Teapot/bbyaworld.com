{% extends 'base.html' %}

{% set class = 'carousel-narrow' %}
{% set title = 'Территории игроков' %}

{% set pages_total = (total_count / 50)|round(0, 'ceil') %}

{% block content %}
    {% include 'components/header.html' %}

    <div class="container content">
        <h1>{{ title }}</h1>
        <table class="stats">
            <thead>
                <tr>
                    <td>#</td>
                    <td>Территория</td>
                    <td>Площадь</td>
                </tr>
            </thead>
            <tbody>
                {% if areas|length > 0 %}
                    {% for area in areas %}
                        <tr>
                            <td class="index">{{ loop.index0 + 1 + (current_page - 1) * 50 }}</td>
                            <td>{{ area.label }}</td>
                            <td class="right">{{ (area.area)|number_format(1, ',', ' ') }}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td class="empty" colspan="3">Тут пусто</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
        <div class="pager">
            {% if current_page > 1 %}
                <a href="?p=1" title="Первая страница">&laquo;</a>
            {% endif %}
            {% if current_page > 2 %}
                <a href="?p={{ current_page - 2 }}">{{ current_page - 2 }}</a>
            {% endif %}
            {% if current_page > 1 %}
                <a href="?p={{ current_page - 1 }}">{{ current_page - 1 }}</a>
            {% endif %}
            <span class="page current">{{ current_page }}</span>
            {% if current_page < pages_total %}
                <a href="?p={{ current_page + 1 }}">{{ current_page + 1 }}</a>
            {% endif %}
            {% if current_page < pages_total - 1 %}
                <a href="?p={{ current_page + 2 }}">{{ current_page + 2 }}</a>
            {% endif %}
            {% if current_page < pages_total %}
                <a href="?p={{ pages_total }}" title="Последняя страница">&raquo;</a>
            {% endif %}
            <p class="minor">Страница {{ current_page }} из {{ pages_total }}</p>
        </div>
    </div>
{% endblock %}
